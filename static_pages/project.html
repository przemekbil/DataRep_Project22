<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <title>
            Project for 2022 Data Representation course
        </title>
    </head>
    <body>
        <h1>2022 DATA REPRESENTATION Project</h1>
        <h1>Search Artist on Musixmatch.com</h1>
        <form id="search_artist">
          <label for="query">Search:</label>
          <input type="text" id="query" name="query">
          <button type="submit">Go</button>
        </form>
        <div id="search_results"></div>        
        <script>      
            // Search for artists
            const form = document.getElementById('search_artist');
            form.addEventListener('submit', async (event) => {
              event.preventDefault();
              const formData = new FormData(form);
              const query = formData.get('query');
              $.ajax(
                {
                    "url":`api/mm/find.artist/${query}`,
                    "method":"GET",
                    "data":"",
                    "dataType": "JSON",
                    "contentType": "application/json; charset=utf-8",
                    "success":function(result){   
                        console.log(result)                         
                        const searchResults = document.getElementById('search_results');
                        searchResults.innerHTML = 'Artists found:';
                        for (const artist of result) {
                            const li = document.createElement('li');
                            li.innerHTML = `${artist.artist_Name}, ${artist.artist_id}`;
                            searchResults.appendChild(li);
                        }
                    },
                    "error":function(xhr, status, error){
                        console.log("error: "+status+" msg: "+ error);
                    }
                }
              )
            });        
          </script>        
    </body>
</html>