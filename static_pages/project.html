<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <title>
            Project for 2022 Data Representation course
        </title>
    </head>
    <body>
        <h1>2022 DATA REPRESENTATION Project</h1>
        <h1>Search Artist on Musixmatch.com</h1>
        <form id="search_artist">
          <label for="query">Search:</label>
          <input type="text" id="query" name="query">
          <button type="submit">Search</button>
        </form>
        <div id="search_results"></div>        
        <script>      
            // Search for artists
            const form = document.getElementById('search_artist');
            form.addEventListener('submit', async (event) => {
              event.preventDefault();
              const formData = new FormData(form);
              const query = formData.get('query');
              $.ajax(
                {
                    "url":`api/mm/find.artist/${query}`,
                    "method":"GET",
                    "data":"",
                    "dataType": "JSON",
                    "contentType": "application/json; charset=utf-8",
                    "success":function(result){   
                        //console.log(result)                         
                        const searchResults = document.getElementById('search_results');
                        searchResults.innerHTML = 'Artists matching your query:';
                        // loop over results to list each artist found
                        for (const artist of result) {
                            var div = document.createElement('div');
                            div.setAttribute('class', 'artist');
                            div.setAttribute('id', artist.artist_id);
                            div.innerHTML = `<a href=api/mm/show.artist.albums/${artist.artist_id}> ${artist.artist_Name}</a>`;
                            searchResults.appendChild(div);
                        }

                    },
                    "error":function(xhr, status, error){
                        console.log("error: "+status+" msg: "+ error);
                    }
                }
              )
            });        
          </script>        
    </body>
</html>